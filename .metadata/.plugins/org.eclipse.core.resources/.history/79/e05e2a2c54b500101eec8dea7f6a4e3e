<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ê²Œì‹œê¸€ ê´€ë¦¬</title>
  <link rel="stylesheet" href="<c:url value="/resources/css/adminStyle.css" />">
  <style>
    /* í™œì„± ë©”ë‰´ ìŠ¤íƒ€ì¼ */
    .sidebar li.has-submenu > a { font-weight: bold; }
    .sidebar ul.submenu { list-style: none; padding-left: 15px; margin-top: 5px; }
    /* ì„œë¸Œ ë©”ë‰´ ìŠ¤íƒ€ì¼: ì§™ì€ íšŒìƒ‰ìœ¼ë¡œ ì‹œì‘í•˜ì—¬, hover/active ì‹œ ë³´ë¼ìƒ‰ìœ¼ë¡œ ê°•ì¡° */
    .sidebar ul.submenu li a { display: block; padding: 5px 0 5px 15px; color: #555; font-size: 0.9em; border-left: 2px solid transparent; transition: all 0.2s; }
    .sidebar ul.submenu li a.sub-active { color: #5a5ce8; font-weight: 600; border-left: 2px solid #5a5ce8; }
    .sidebar ul.submenu li a:hover { color: #5a5ce8; }
  </style>
</head>
<body>
  <header>
    <div class="logo">
      <img src="<c:url value="/resources/images/logo.png" />" width="80">
      ê´€ë¦¬ì í˜ì´ì§€
    </div>
  </header>

  <%-- ğŸ’¡ JSTL: í˜„ì¬ ë³´ê³  ìˆëŠ” ê²Œì‹œíŒì˜ íƒ€ì…ê³¼ ì œëª©ì„ ì„¤ì • (URLì˜ param.boardë¥¼ ì‚¬ìš©) --%>
  <c:set var="currentBoard" value="${param.board}" />
  <c:set var="boardTitle" value="ì „ì²´ ê²Œì‹œê¸€" />
  <c:choose>
    <c:when test="${currentBoard eq 'notice'}"><c:set var="boardTitle" value="ê³µì§€ì‚¬í•­ ê´€ë¦¬" /></c:when>
    <c:when test="${currentBoard eq 'info'}"><c:set var="boardTitle" value="ì •ë³´ ë‚˜ëˆ” ê´€ë¦¬" /></c:when>
    <c:when test="${currentBoard eq 'free'}"><c:set var="boardTitle" value="ììœ  ê²Œì‹œíŒ ê´€ë¦¬" /></c:when>
    <%-- board íŒŒë¼ë¯¸í„°ê°€ ì—†ê±°ë‚˜ ì˜¬ë°”ë¥´ì§€ ì•Šìœ¼ë©´ 'notice'ë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì • --%>
    <c:otherwise><c:set var="currentBoard" value="notice" /><c:set var="boardTitle" value="ê³µì§€ì‚¬í•­ ê´€ë¦¬" /></c:otherwise>
  </c:choose>

  <div class="layout">
    <aside class="sidebar">
      <ul>
        <li><a href="<c:url value="/admin/dashboard" />">ğŸ  ëŒ€ì‹œë³´ë“œ</a></li>
        <li><a href="<c:url value="/admin/member" />">ğŸ‘¥ íšŒì› ê´€ë¦¬</a></li>
        <%-- ğŸ“ ê²Œì‹œê¸€ ê´€ë¦¬ë¥¼ ìƒìœ„ ë©”ë‰´ë¡œ, ê° ê²Œì‹œíŒì„ í•˜ìœ„ ë©”ë‰´ë¡œ ë³€ê²½ --%>
        <li class="has-submenu">
          <a href="<c:url value="/admin/post?board=notice" />" class="active">ğŸ“ ê²Œì‹œê¸€ ê´€ë¦¬</a>
          <ul class="submenu">
            <li><a href="<c:url value="/admin/post?board=notice" />" class="<c:if test="${currentBoard eq 'notice'}">sub-active</c:if>">ê³µì§€ì‚¬í•­</a></li>
            <li><a href="<c:url value="/admin/post?board=info" />" class="<c:if test="${currentBoard eq 'info'}">sub-active</c:if>">ì •ë³´ ë‚˜ëˆ”</a></li>
            <li><a href="<c:url value="/admin/post?board=free" />" class="<c:if test="${currentBoard eq 'free'}">sub-active</c:if>">ììœ  ê²Œì‹œíŒ</a></li>
            <%-- ì¶”í›„ IT ë‰´ìŠ¤, ì§€ì‹ ê³µìœ , ìŠ¤í„°ë”” ëª¨ì§‘ ë“± ë‹¤ë¥¸ ê²Œì‹œíŒ ì¶”ê°€ ì‹œ ì—¬ê¸°ì— ì¶”ê°€ --%>
          </ul>
        </li>
        <li><a href="<c:url value="/admin/reply" />">ğŸ’¬ ëŒ“ê¸€ ê´€ë¦¬</a></li>
        <li><a href="<c:url value="/admin/stats" />">ğŸ“Š í†µê³„</a></li>
        <li><a href="<c:url value="/admin/logout" />">ğŸšª ë¡œê·¸ì•„ì›ƒ</a></li>
      </ul>
    </aside>

    <main>
      <%-- í˜„ì¬ ë³´ê³  ìˆëŠ” ê²Œì‹œíŒ ì œëª© í‘œì‹œ --%>
      <h1>ğŸ“ ${boardTitle}</h1>
      <p>í˜„ì¬ **${boardTitle}**ì— ë“±ë¡ëœ ê²Œì‹œê¸€ì„ í™•ì¸í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

      <form action="<c:url value="/admin/searchPost" />" method="get" style="margin-bottom: 20px; display:flex; gap:10px; align-items:center; background:#fff; padding:15px; border-radius:10px; box-shadow:0 2px 5px rgba(0,0,0,0.05);">
        <%-- ğŸ’¡ ì¤‘ìš”: ê²€ìƒ‰ ì‹œ í˜„ì¬ ê²Œì‹œíŒ íƒ€ì…ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ hidden input ì¶”ê°€ --%>
        <input type="hidden" name="board" value="${currentBoard}">

        <%-- 'ì •ë³´ ë‚˜ëˆ”' ê²Œì‹œíŒì—ë§Œ ì¹´í…Œê³ ë¦¬/ìœ í˜• ë“œë¡­ë‹¤ìš´ í‘œì‹œ (ê°€ì •) --%>
        <c:if test="${currentBoard eq 'info'}">
            <select name="category" style="padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
              <option value="all">-- ì „ì²´ ì¹´í…Œê³ ë¦¬ --</option>
              <option value="tip">íŒ/ë…¸í•˜ìš°</option>
              <option value="review">ë¦¬ë·°</option>
              <option value="etc">ê¸°íƒ€</option>
            </select>
        </c:if>

        <select name="searchKey" style="padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
          <option value="title">ì œëª©</option>
          <%-- ê³µì§€ì‚¬í•­(ê´€ë¦¬ì) ì™¸ì—ëŠ” ì‘ì„±ì ê²€ìƒ‰ ê°€ëŠ¥ --%>
          <c:if test="${currentBoard ne 'notice'}">
            <option value="writer">ì‘ì„±ì</option>
          </c:if>
        </select>
        <input type="text" name="keyword" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”" style="flex-grow: 1; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
        <button type="submit" style="background:#5a5ce8; color:white; border:none; padding:8px 15px; border-radius:4px; cursor:pointer;">ê²€ìƒ‰</button>
      </form>

      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
        <%-- ê³µì§€ì‚¬í•­ ê´€ë¦¬ í˜ì´ì§€ì—ë§Œ ê¸€ì“°ê¸° ë²„íŠ¼ ì¶”ê°€ (ê´€ë¦¬ììš©) --%>
        <c:if test="${currentBoard eq 'notice'}">
          <button style="background:#28a745; color:white; border:none; padding:8px 15px; border-radius:4px; cursor:pointer;" onclick="location.href='<c:url value="/admin/post/writeNotice" />';">
            ìƒˆ ê³µì§€ ì‘ì„±
          </button>
        </c:if>
        <div style="flex-grow: 1;"></div> <%-- ì™¼ìª½ ë²„íŠ¼ê³¼ ì˜¤ë¥¸ìª½ ë²„íŠ¼ ì‚¬ì´ì— ê³µê°„ í™•ë³´ --%>
        <button style="background:#dc3545; color:white; border:none; padding:8px 15px; border-radius:4px; cursor:pointer;">
          ì„ íƒ í•­ëª© ì¼ê´„ ì‚­ì œ
        </button>
      </div>


      <table border="1" cellpadding="10" cellspacing="0" style="width:100%; background:white; border-collapse:collapse; text-align:center;">
        <tr style="background:#f3f4f6;">
          <th style="width: 30px;"><input type="checkbox" id="selectAllCheckbox"></th>
          <th style="width: 50px;">ë²ˆí˜¸</th>
          <%-- ì •ë³´ ë‚˜ëˆ” ê²Œì‹œíŒì—ëŠ” ì¹´í…Œê³ ë¦¬ ì—´ ì¶”ê°€ --%>
          <c:if test="${currentBoard eq 'info'}">
            <th style="width: 100px;">ì¹´í…Œê³ ë¦¬</th>
          </c:if>
          <th>ì œëª©</th>
          <%-- ê³µì§€ì‚¬í•­ ì™¸ ê²Œì‹œíŒì—ë§Œ ì‘ì„±ì ì—´ í‘œì‹œ --%>
          <c:if test="${currentBoard ne 'notice'}">
            <th style="width: 120px;">ì‘ì„±ì</th>
          </c:if>
          <th style="width: 120px;">ì‘ì„±ì¼</th>
          <th style="width: 60px;">ì¡°íšŒìˆ˜</th>
          <th style="width: 80px;">ê´€ë¦¬</th>
        </tr>

        <%-- ğŸ’¡ ê²Œì‹œê¸€ ëª©ë¡ ì¶œë ¥ ë¶€ë¶„ (Mock Data) --%>
        <c:choose>
          <c:when test="${currentBoard eq 'notice'}">
            <%-- ê³µì§€ì‚¬í•­ Mock Data --%>
            <tr><td><input type="checkbox" class="itemCheckbox"></td><td>1</td><td style="text-align:left;">[í•„ë…] ì„œë¹„ìŠ¤ ê°œí¸ ì•ˆë‚´</td><td>2025-04-10</td><td>300</td><td><button style="background:#ffc107; color:#333; border:none; padding:5px 10px; border-radius:3px; cursor:pointer;">ìˆ˜ì •</button> <button style="background:#dc3545; color:white; border:none; padding:5px 10px; border-radius:3px; cursor:pointer;">ì‚­ì œ</button></td></tr>
            <tr><td><input type="checkbox" class="itemCheckbox"></td><td>2</td><td style="text-align:left;">ì‹ ê·œ ê¸°ëŠ¥ ì—…ë°ì´íŠ¸ ê³µì§€</td><td>2025-03-25</td><td>150</td><td><button style="background:#ffc107; color:#333; border:none; padding:5px 10px; border-radius:3px; cursor:pointer;">ìˆ˜ì •</button> <button style="background:#dc3545; color:white; border:none; padding:5px 10px; border-radius:3px; cursor:pointer;">ì‚­ì œ</button></td></tr>
            <tr><td><input type="checkbox" class="itemCheckbox"></td><td>3</td><td style="text-align:left;">2ì›” ì„œë²„ ì ê²€ ì¼ì •</td><td>2025-02-14</td><td>80</td><td><button style="background:#ffc107; color:#333; border:none; padding:5px 10px; border-radius:3px; cursor:pointer;">ìˆ˜ì •</button> <button style="background:#dc3545; color:white; border:none; padding:5px 10px; border-radius:3px; cursor:pointer;">ì‚­ì œ</button></td></tr>
            <%-- <c:forEach var="post" items="${noticeList}"> ... </c:forEach> í˜•íƒœë¡œ ì‹¤ì œ ë°ì´í„° ì¶œë ¥ ì˜ˆì • --%>
          </c:when>
          <c:when test="${currentBoard eq 'info'}">
            <%-- ì •ë³´ ë‚˜ëˆ” Mock Data --%>
            <tr><td><input type="checkbox" class="itemCheckbox"></td><td>1</td><td>íŒ/ë…¸í•˜ìš°</td><td style="text-align:left;">Spring Boot 3 í™˜ê²½ ì„¤ì • íŒ</td><td>dev_master</td><td>2025-04-05</td><td>250</td><td><button style="background:#dc3545; color:white; border:none; padding:5px 10px; border-radius:3px; cursor:pointer;">ì‚­ì œ</button></td></tr>
            <tr><td><input type="checkbox" class="itemCheckbox"></td><td>2</td><td>ë¦¬ë·°</td><td style="text-align:left;">ìµœì‹  AI ëª¨ë¸ ì‚¬ìš© í›„ê¸°</td><td>AI_lover</td><td>2025-03-30</td><td>180</td><td><button style="background:#dc3545; color:white; border:none; padding:5px 10px; border-radius:3px; cursor:pointer;">ì‚­ì œ</button></td></tr>
            <tr><td><input type="checkbox" class="itemCheckbox"></td><td>3</td><td>ê¸°íƒ€</td><td style="text-align:left;">ê°œë°œì ì»¨í¼ëŸ°ìŠ¤ í›„ê¸°</td><td>traveler</td><td>2025-03-15</td><td>120</td><td><button style="background:#dc3545; color:white; border:none; padding:5px 10px; border-radius:3px; cursor:pointer;">ì‚­ì œ</button></td></tr>
            <%-- <c:forEach var="post" items="${infoList}"> ... </c:forEach> í˜•íƒœë¡œ ì‹¤ì œ ë°ì´í„° ì¶œë ¥ ì˜ˆì • --%>
          </c:when>
          <c:when test="${currentBoard eq 'free'}">
            <%-- ììœ  ê²Œì‹œíŒ Mock Data --%>
            <tr><td><input type="checkbox" class="itemCheckbox"></td><td>1</td><td style="text-align:left;">ì˜¤ëŠ˜ ì ì‹¬ì€ ë­ ë¨¹ì„ê¹Œìš”? (ê³ ë¯¼)</td><td>user123</td><td>2025-04-08</td><td>90</td><td><button style="background:#dc3545; color:white; border:none; padding:5px 10px; border-radius:3px; cursor:pointer;">ì‚­ì œ</button></td></tr>
            <tr><td><input type="checkbox" class="itemCheckbox"></td><td>2</td><td style="text-align:left;">ì£¼ë§ì— ê°€ë³¼ ë§Œí•œ ê³³ ì¶”ì²œ ë°›ì•„ìš”!</td><td>explorer</td><td>2025-03-22</td><td>110</td><td><button style="background:#dc3545; color:white; border:none; padding:5px 10px; border-radius:3px; cursor:pointer;">ì‚­ì œ</button></td></tr>
            <tr><td><input type="checkbox" class="itemCheckbox"></td><td>3</td><td style="text-align:left;">í˜¹ì‹œ ì´ëŸ° ì—ëŸ¬ ê²ªì–´ë³´ì‹  ë¶„ ê³„ì‹ ê°€ìš”?</td><td>bug_hunter</td><td>2025-03-10</td><td>150</td><td><button style="background:#dc3545; color:white; border:none; padding:5px 10px; border-radius:3px; cursor:pointer;">ì‚­ì œ</button></td></tr>
            <%-- <c:forEach var="post" items="${freeList}"> ... </c:forEach> í˜•íƒœë¡œ ì‹¤ì œ ë°ì´í„° ì¶œë ¥ ì˜ˆì • --%>
          </c:when>
          <c:otherwise>
            <tr><td colspan="7" style="padding: 50px; color: #777;">ê²Œì‹œíŒ ì •ë³´ê°€ ì˜¬ë°”ë¥´ì§€ ì•Šê±°ë‚˜ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>
          </c:otherwise>
        </c:choose>
      </table>

      <div style="margin-top:20px; text-align:center;">
        <a href="#" style="text-decoration:none; padding:5px 10px; border:1px solid #ccc; border-radius:3px; margin:0 2px;">&lt;</a>
        <a href="#" style="text-decoration:none; padding:5px 10px; border:1px solid #ccc; border-radius:3px; margin:0 2px; background:#5a5ce8; color:white;">1</a>
        <a href="#" style="text-decoration:none; padding:5px 10px; border:1px solid #ccc; border-radius:3px; margin:0 2px;">2</a>
        <a href="#" style="text-decoration:none; padding:5px 10px; border:1px solid #ccc; border-radius:3px; margin:0 2px;">3</a>
        <a href="#" style="text-decoration:none; padding:5px 10px; border:1px solid #ccc; border-radius:3px; margin:0 2px;">4</a>
        <a href="#" style="text-decoration:none; padding:5px 10px; border:1px solid #ccc; border-radius:3px; margin:0 2px;">5</a>
        <a href="#" style="text-decoration:none; padding:5px 10px; border:1px solid #ccc; border-radius:3px; margin:0 2px;">&gt;</a>
      </div>
    </main>
  </div>

  <footer>â“’ 2025 IT GO UP GO. All Rights Reserved.</footer>

<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        const selectAllCheckbox = document.getElementById('selectAllCheckbox');
        const itemCheckboxes = document.querySelectorAll('.itemCheckbox');

        // ğŸ’¡ ì²´í¬ë°•ìŠ¤ ì „ì²´ ì„ íƒ/í•´ì œ ê¸°ëŠ¥
        selectAllCheckbox.addEventListener('change', function() {
            itemCheckboxes.forEach(checkbox => {
                checkbox.checked = this.checked;
            });
        });	

        itemCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                const checkedItems = document.querySelectorAll('.itemCheckbox:checked').length;
                if (!checkbox.checked) {
                    selectAllCheckbox.checked = false;
                } else if (checkedItems === itemCheckboxes.length) {
                    selectAllCheckbox.checked = true;
                }
            });
        });
        
        // ğŸ’¡ [ì¶”ê°€] ì‚¬ì´ë“œë°” ì„œë¸Œë©”ë‰´ í™œì„±í™” ì²˜ë¦¬ (ìƒˆë¡œê³ ì¹¨ ì‹œ í™œì„± ìœ ì§€)
        const currentBoard = '${currentBoard}';
        const subLinks = document.querySelectorAll('.submenu a');
        
        // ì„œë¸Œë©”ë‰´ í™œì„±í™”
        subLinks.forEach(link => {
            const url = new URL(link.href);
            const boardParam = url.searchParams.get('board');
            if (boardParam === currentBoard) {
                link.classList.add('sub-active');
            } else {
                 link.classList.remove('sub-active');
            }
        });
        
        // ğŸ’¡ [ì¶”ê°€] ë©”ì¸ 'ê²Œì‹œê¸€ ê´€ë¦¬' ë©”ë‰´ë„ í™œì„±í™” ìƒíƒœ ìœ ì§€
        const mainPostLink = document.querySelector('.sidebar a[href*="/admin/post"]');
        if (mainPostLink && (currentBoard === 'notice' || currentBoard === 'info' || currentBoard === 'free')) {
             mainPostLink.classList.add('active');
        }
    });
</script>
</body>
</html>
