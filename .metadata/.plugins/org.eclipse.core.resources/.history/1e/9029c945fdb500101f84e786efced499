package com.itgoupgo.community.admin.controller;

import java.util.ArrayList;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;

import com.itgoupgo.community.admin.model.service.AdminService;
import com.itgoupgo.community.common.model.vo.Pagination;
import com.itgoupgo.community.free.model.service.FreeService;
import com.itgoupgo.community.free.model.vo.FreeBbs; // ììœ ê²Œì‹œíŒ VO
import com.itgoupgo.community.info.model.service.InfoService;
import com.itgoupgo.community.info.model.vo.InfoBbs; // ì •ë³´ê³µìœ ê²Œì‹œíŒ VO
import com.itgoupgo.community.it.model.service.ItService;
import com.itgoupgo.community.it.model.vo.ItBbs; // ITë‰´ìŠ¤ VO
import com.itgoupgo.community.knowledge.model.service.KnowledgeService;
import com.itgoupgo.community.knowledge.model.vo.KnowledgeBbs; // ì§€ì‹ê³µìœ ê²Œì‹œíŒ VO
import com.itgoupgo.community.member.model.vo.Member;
import com.itgoupgo.community.notice.model.service.NoticeService;
import com.itgoupgo.community.notice.model.vo.NoticeBbs; // ê³µì§€ì‚¬í•­ VO
import com.itgoupgo.community.study.model.service.StudyService;
import com.itgoupgo.community.study.model.vo.StudyBbs; // ìŠ¤í„°ë””ëª¨ì§‘ê²Œì‹œíŒ VO

import jakarta.servlet.http.HttpSession;

@Controller
@RequestMapping("/admin")Â 
public class AdminController {
	
	@Autowired
	private AdminService adminService;
Â  Â Â 
Â  Â  @Autowired
Â  Â  private FreeService freeService;

Â  Â  @Autowired
Â  Â  private InfoService infoService;
Â  Â Â 
Â  Â  @Autowired
Â  Â  private StudyService studyService;
Â  Â Â 
Â  Â  @Autowired
Â  Â  private NoticeService noticeService;
Â  Â Â 
Â  Â  @Autowired
Â  Â  private KnowledgeService knowledgeService;
Â  Â Â 
Â  Â  @Autowired
Â  Â  private ItService itService;
Â  Â Â 
Â  Â  @GetMapping({"", "/dashboard"})
Â  Â  public String adminDashboard() {
Â  Â  Â  Â  return "admin/admin";Â 
Â  Â  }
Â  Â Â 
Â  Â  // ê²Œì‹œê¸€ ê´€ë¦¬ ë©”ì¸ í˜ì´ì§€ (ê¸°ì¡´ ìœ ì§€)
Â  Â  @GetMapping("/post")
Â  Â  public String postManage() {
Â  Â  	
Â  Â  	return "admin/postManage";
Â  Â  }
Â  Â Â 
Â  Â  @GetMapping("/reply")
Â  Â  public String replyManage() {
Â  Â  Â  Â  return "admin/replyManage";
Â  Â  }

Â  Â  @GetMapping("/stats")
Â  Â  public String statsPage() {
Â  Â  Â  Â  return "admin/stats";
Â  Â  }

Â  Â  @GetMapping("/logout")
Â  Â  public String logout() {
Â  Â  Â  Â  return "admin/logout"; // ì‹¤ì œ ë¡œê·¸ì•„ì›ƒ ë¡œì§ì€ ìƒëµ
Â  Â  }

Â  Â  /**
Â  Â  Â * íšŒì› ëª©ë¡ ì¡°íšŒ í˜ì´ì§€ (í˜ì´ì§• ì ìš©) - (ê¸°ì¡´ ìœ ì§€)
Â  Â  Â */
Â  Â  @GetMapping("/member")
Â  Â  public String memberManage(
Â  Â  Â  Â  @RequestParam(value = "currentPage", defaultValue = "1") int currentPage,Â 
Â  Â  Â  Â  Model model) {
Â  Â  Â  Â Â 
Â  Â  Â  Â  // 1. ì „ì²´ íšŒì› ìˆ˜ ì¡°íšŒ (listCount)
Â  Â  Â  Â  int listCount = adminService.selectListCount();Â 
Â  Â  Â  Â Â 
Â  Â  Â  Â  // 2. Pagination ê°ì²´ ìƒì„± (pageLimit, listLimitì€ Serviceì—ì„œ ì²˜ë¦¬í•œë‹¤ê³  ê°€ì •)
Â  Â  Â  Â  Pagination pageInfo = adminService.getPagination(currentPage, listCount); //Â 
Â  Â  Â  Â Â 
Â  Â  Â  Â  // 3. í˜„ì¬ í˜ì´ì§€ì— í•´ë‹¹í•˜ëŠ” íšŒì› ëª©ë¡ ì¡°íšŒ
Â  Â  Â  Â  List<Member> memberList = adminService.selectMemberList(pageInfo);
Â  Â  Â  Â Â 
Â  Â  Â  Â  // 4. ëª¨ë¸ì— ëª©ë¡ê³¼ í˜ì´ì§• ì •ë³´ë¥¼ ë‹´ì•„ ì „ë‹¬
Â  Â  Â  Â  model.addAttribute("memberList", memberList);
Â  Â  Â  Â  model.addAttribute("pageInfo", pageInfo);
Â  Â  Â  Â Â 
Â  Â  Â  Â  return "admin/memberManage";
Â  Â  }
Â  Â Â 
Â  Â  // ----------------------------------------------------
Â  Â  // 3. ê´€ë¦¬ìí˜ì´ì§€ íšŒì› ìƒì„¸ ì¡°íšŒ ê¸°ëŠ¥ (ê¸°ì¡´ ìœ ì§€)
Â  Â  // ----------------------------------------------------
Â  Â  @GetMapping("/memberDetail")
Â  Â  public String memberDetail(
Â  Â  Â  Â  @RequestParam("memberNo") int memberNo, // memberNoë¥¼ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ìœ¼ë¡œ ë°›ìŒ
Â  Â  Â  Â  Model model,
Â  Â  Â  Â  HttpSession session) {
Â  Â  Â  Â Â 
Â  Â  Â  Â  Member member = adminService.selectMemberDetail(memberNo);
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (member == null) {
Â  Â  Â  Â  Â  Â  // ìƒì„¸ ì¡°íšŒì— ì‹¤íŒ¨í–ˆì„ ê²½ìš° (ì˜ˆ: ì˜ëª»ëœ memberNo)
Â  Â  Â  Â  Â  Â  session.setAttribute("alertMsg", "í•´ë‹¹ íšŒì› ì •ë³´ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
Â  Â  Â  Â  Â  Â  return "redirect:/admin/member";
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  model.addAttribute("member", member);
Â  Â  Â  Â Â 
Â  Â  Â  Â  // ë·° ë¦¬ì¡¸ë²„ ì„¤ì •(application.properties)ì— ë”°ë¼
Â  Â  Â  Â  // /WEB-INF/views/admin/memberDetail.jsp íŒŒì¼ì„ ì°¾ê²Œ ë¨
Â  Â  Â  Â  return "admin/memberDetail";Â 
Â  Â  }
Â  Â Â 
Â  Â  // ----------------------------------------------------
Â  Â  // 4. íšŒì› ë‹¨ì¼ íƒˆí‡´ ì²˜ë¦¬ (ê¸°ì¡´ ìœ ì§€)
Â  Â  // ----------------------------------------------------
Â  Â  @GetMapping("/delete")
Â  Â  public String deleteMember(@RequestParam("memberId") String memberId, HttpSession session) {
Â  Â  Â  Â Â 
Â  Â  Â  Â  int result = adminService.deleteMemberAdmin(memberId);
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (result > 0) {
Â  Â  Â  Â  Â  Â  session.setAttribute("alertMsg", "íšŒì› (" + memberId + ") íƒˆí‡´ ì²˜ë¦¬ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  session.setAttribute("alertMsg", "íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
Â  Â  Â  Â  }

Â  Â  Â  Â  return "redirect:/admin/member";
Â  Â  }
Â  Â Â 
Â  Â  // ----------------------------------------------------
Â  Â  // 5. íšŒì› ì¼ê´„ íƒˆí‡´ ì²˜ë¦¬ (ê¸°ì¡´ ìœ ì§€)
Â  Â  // ----------------------------------------------------
Â  Â  @PostMapping("/deleteCheckMember")
Â  Â  public String deleteCheckMember(
Â  Â  Â  Â  @RequestParam(value = "memberNoList", required = false) List<Integer> memberNoList,
Â  Â  Â  Â  HttpSession session) {

Â  Â  Â  Â  if (memberNoList == null || memberNoList.isEmpty()) {
Â  Â  Â  Â  Â  Â  Â session.setAttribute("alertMsg", "ì„ íƒëœ íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤.");
Â  Â  Â  Â  Â  Â  Â return "redirect:/admin/member";
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  int result = adminService.deleteCheckMember(memberNoList);

Â  Â  Â  Â  if (result == memberNoList.size()) {
Â  Â  Â  Â  Â  Â  session.setAttribute("alertMsg", result + "ëª…ì˜ íšŒì›ì´ ì„±ê³µì ìœ¼ë¡œ ì¼ê´„ íƒˆí‡´ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  session.setAttribute("alertMsg", "ì¼ê´„ íƒˆí‡´ ì²˜ë¦¬ ì¤‘ ì¼ë¶€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. (" + result + "ëª… ì²˜ë¦¬ë¨)");
Â  Â  Â  Â  }

Â  Â  Â  Â  return "redirect:/admin/member";
Â  Â  }
Â  Â Â 
Â  Â  // ----------------------------------------------------
Â  Â  // 6. íšŒì› ê²€ìƒ‰ (ì´ë¦„) (ê¸°ì¡´ ìœ ì§€)
Â  Â  // ----------------------------------------------------
Â  Â  @GetMapping("/searchMemberName")
Â  Â  public String searchMemberName(
Â  Â  Â  Â  @RequestParam("keyword") String memberName,Â 
Â  Â  Â  Â  Model model) {
Â  Â  	
Â  Â  Â  Â  List<Member> searchList = adminService.searchMemberByName(memberName);
Â  Â  Â  Â Â 
Â  Â  Â  Â  model.addAttribute("memberList", searchList);
Â  Â  Â  Â  model.addAttribute("searchCondition", "searchMemberName");
Â  Â  Â  Â  model.addAttribute("searchKeyword", memberName);
Â  Â  	
Â  Â  	return "admin/memberManage";
Â  Â  }
Â  Â Â 
Â  Â  // ----------------------------------------------------
Â  Â  // 7. íšŒì› ê²€ìƒ‰ (ì•„ì´ë””) (ê¸°ì¡´ ìœ ì§€)
Â  Â  // ----------------------------------------------------
Â  Â  @GetMapping("/searchMemberId")
Â  Â  public String searchMemberId(
Â  Â  Â  Â  @RequestParam("keyword") String memberId,
Â  Â  Â  Â  Model model) {
Â  Â  	
Â  Â  Â  Â  Member m = adminService.searchMemberById(memberId);
Â  Â  Â  Â Â 
Â  Â  Â  Â  // JSP í˜¸í™˜ì„ ìœ„í•´ Listë¡œ ê°ì‹¸ê¸°
Â  Â  Â  Â  List<Member> searchList = new ArrayList<>();
Â  Â  Â  Â  if (m != null) {
Â  Â  Â  Â  Â  Â  searchList.add(m);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  model.addAttribute("memberList", searchList);
Â  Â  Â  Â  model.addAttribute("searchCondition", "searchMemberId");
Â  Â  Â  Â  model.addAttribute("searchKeyword", memberId);

Â  Â  Â  Â  return "admin/memberManage";
Â  Â  }
Â  Â Â 
Â  Â  // ****************************************************
Â  Â  // ğŸŸ¢ ê²Œì‹œíŒë³„ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ ê¸°ëŠ¥
Â  Â  // ****************************************************
Â  Â Â 
Â  Â  /**
Â  Â  Â * ììœ  ê²Œì‹œíŒ ê´€ë¦¬ í˜ì´ì§€ë¡œ ì´ë™ & ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ (í†µí•©)
Â  Â  Â */

Â  Â  @GetMapping("/freeBbsManage")
Â  Â  public String freeBbsManage(
Â  Â  Â  Â  @RequestParam(value = "currentPage", defaultValue = "1") int currentPage,
Â  Â  Â  Â  Model model) {
Â  Â  Â  Â Â 
Â  Â  Â  Â  // 1. listCountë¥¼ FreeServiceë¥¼ í†µí•´ ì¡°íšŒ
Â  Â  Â  Â  int listCount = freeService.selectListCount();Â 
Â  Â  Â  Â Â 
Â  Â  Â  Â  // 2. Pagination ê°ì²´ ìƒì„± (AdminServiceì˜ ê³µí†µ ìœ í‹¸ë¦¬í‹° ì‚¬ìš©)
Â  Â  Â  Â  Pagination pageInfo = adminService.getPagination(currentPage, listCount);
Â  Â  Â  Â Â 
Â  Â  Â  Â  // 3. í˜„ì¬ í˜ì´ì§€ ëª©ë¡ì„ FreeServiceë¥¼ í†µí•´ ì¡°íšŒ
Â  Â  Â  Â  List<FreeBbs> freeBbsList = freeService.selectList(currentPage); // ğŸ’¡ ë³€ìˆ˜ëª…ë„ freeBbsListë¡œ ë³€ê²½í•˜ëŠ” ê²ƒì„ ê¶Œì¥
Â  Â  Â  Â Â 
Â  Â  Â  Â  // 4. ëª¨ë¸ì— ë°ì´í„° ì¶”ê°€
Â  Â  Â  Â  // ğŸ’¡ ìˆ˜ì •: "bbsList"ë¥¼ "freeBbsList"ë¡œ ë³€ê²½í•˜ì—¬ JSPì™€ ì¼ì¹˜ì‹œí‚´
Â  Â  Â  Â  model.addAttribute("freeBbsList", freeBbsList);Â 
Â  Â  Â  Â  model.addAttribute("pageInfo", pageInfo);
Â  Â  Â  Â  model.addAttribute("boardName", "ììœ  ê²Œì‹œíŒ");
Â  Â  Â  Â  model.addAttribute("boardCode", "free");
Â  Â  Â  Â Â 
Â  Â  Â  Â  // 5. JSP ë¦¬í„´
Â  Â  Â  Â  return "admin/freeBbsManage";Â 
Â  Â  }
Â  Â Â 
	 // 1. ë‹¨ì¼ ê²Œì‹œê¸€ ì‚­ì œ (GET ìš”ì²­ ì²˜ë¦¬)
	 // URL: /admin/deleteFreeBbsPost -> /admin/deleteFreeBbs
	 @GetMapping("/deleteFreeBbs")
	 public String deleteFreeBbs(@RequestParam("bbsNo") int bbsNo, RedirectAttributes ra) {
	Â  Â  Â int result = freeService.deleteFreeBbs(bbsNo); // ë©”ì†Œë“œëª… ë³€ê²½
	Â  Â  Â 
	Â  Â  Â if (result > 0) {
	Â  Â  Â  Â  Â ra.addFlashAttribute("message", bbsNo + "ë²ˆ ê²Œì‹œê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œ(ë¹„í™œì„±í™”) ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
	Â  Â  Â } else {
	Â  Â  Â  Â  Â ra.addFlashAttribute("message", "ê²Œì‹œê¸€ ì‚­ì œ ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
	Â  Â  Â }
	Â  Â  Â 
	Â  Â  Â return "redirect:/admin/freeBbsManage";Â 
	 }
	
	 // 2. ì¼ê´„ ì‚­ì œ (POST ìš”ì²­ ì²˜ë¦¬)
	 // URL: /admin/deleteFreeBbsCheckPost -> /admin/deleteFreeBbsCheck
	 @PostMapping("/deleteFreeBbsCheck")
	 public String deleteFreeBbsCheck(@RequestParam(value="bbsNoList", required=false) List<Integer> bbsNoList, RedirectAttributes ra) {
	Â  Â  Â 
	Â  Â  Â if (bbsNoList == null || bbsNoList.isEmpty()) {
	Â  Â  Â  Â  Â ra.addFlashAttribute("message", "ì„ íƒëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.");
	Â  Â  Â  Â  Â return "redirect:/admin/freeBbsManage";
	Â  Â  Â }
	
	Â  Â  Â int result = freeService.deleteFreeBbsCheck(bbsNoList); // ë©”ì†Œë“œëª… ë³€ê²½
	Â  Â  Â 
	Â  Â  Â if (result == bbsNoList.size()) {
	Â  Â  Â  Â  Â ra.addFlashAttribute("message", "ì´ " + result + "ê±´ì˜ ê²Œì‹œê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ì¼ê´„ ì‚­ì œ(ë¹„í™œì„±í™”) ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
	Â  Â  Â } else {
	Â  Â  Â  Â  Â ra.addFlashAttribute("message", "ì¼ê´„ ì‚­ì œ ì²˜ë¦¬ê°€ ì™„ë£Œë˜ì—ˆìœ¼ë‚˜, ìš”ì²­ëœ ê°œìˆ˜(" + bbsNoList.size() + "ê±´) ì¤‘ " + result + "ê±´ë§Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
	Â  Â  Â }
	Â  Â  Â 
	Â  Â  Â return "redirect:/admin/freeBbsManage";
	 }
Â  Â Â 
Â  Â Â 
	 /**
	Â  Â  Â * ì •ë³´ ê³µìœ  ê²Œì‹œíŒ ê´€ë¦¬ í˜ì´ì§€ë¡œ ì´ë™ & ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ (í†µí•©)
	Â  Â  Â */
	Â  Â  @GetMapping("/infoBbsManage")
	Â  Â  public String infoBbsManage(
	Â  Â  Â  Â  @RequestParam(value = "currentPage", defaultValue = "1") int currentPage,
	Â  Â  Â  Â  Model model) {
	Â  Â  Â  Â Â 
	Â  Â  Â  Â  // 1. listCountë¥¼ InfoServiceë¥¼ í†µí•´ ì¡°íšŒ
	Â  Â  Â  Â  int listCount = infoService.selectListCount();Â 
	Â  Â  Â  Â Â 
	Â  Â  Â  Â  // 2. Pagination ê°ì²´ ìƒì„± (AdminServiceì˜ ê³µí†µ ìœ í‹¸ë¦¬í‹° ì‚¬ìš©)
	Â  Â  Â  Â  Pagination pageInfo = adminService.getPagination(currentPage, listCount);
	Â  Â  Â  Â Â 
	Â  Â  Â  Â  // 3. í˜„ì¬ í˜ì´ì§€ ëª©ë¡ì„ InfoServiceë¥¼ í†µí•´ ì¡°íšŒ
	Â  Â  Â  Â  List<InfoBbs> infoBbsList = infoService.selectList(currentPage);
	Â  Â  Â  Â Â 
	Â  Â  Â  Â  // 4. ëª¨ë¸ì— ë°ì´í„° ì¶”ê°€
	Â  Â  Â  Â  model.addAttribute("infoBbsList", infoBbsList);Â 
	Â  Â  Â  Â  model.addAttribute("pageInfo", pageInfo);
	Â  Â  Â  Â  model.addAttribute("boardName", "ì •ë³´ ê³µìœ  ê²Œì‹œíŒ");
	Â  Â  Â  Â  model.addAttribute("boardCode", "info");
	Â  Â  Â  Â Â 
	Â  Â  Â  Â  // 5. JSP ë¦¬í„´
	Â  Â  Â  Â  return "admin/infoBbsManage";Â 
	Â  Â  }
	Â  Â Â 
		 // 1. ë‹¨ì¼ ê²Œì‹œê¸€ ì‚­ì œ (GET ìš”ì²­ ì²˜ë¦¬)
		 // ğŸ’¡ [ìˆ˜ì •] URL: /admin/deleteInfoBbsPost -> /admin/deleteInfoBbs
		 @GetMapping("/deleteInfoBbs")
		 public String deleteInfoBbs(@RequestParam("infoNo") int infoNo, RedirectAttributes ra) {
		Â  Â  Â // InfoServiceì˜ ë©”ì†Œë“œ í˜¸ì¶œ
		Â  Â  Â int result = infoService.deleteInfoBbs(infoNo);Â 
		Â  Â  Â 
		Â  Â  Â if (result > 0) {
		Â  Â  Â  Â  Â ra.addFlashAttribute("message", infoNo + "ë²ˆ ê²Œì‹œê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œ(ë¹„í™œì„±í™”) ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
		Â  Â  Â } else {
		Â  Â  Â  Â  Â ra.addFlashAttribute("message", "ê²Œì‹œê¸€ ì‚­ì œ ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
		Â  Â  Â }
		Â  Â  Â 
		Â  Â  Â return "redirect:/admin/infoBbsManage";Â 
		 }
		
		 // 2. ì¼ê´„ ì‚­ì œ (POST ìš”ì²­ ì²˜ë¦¬)
		 // ğŸ’¡ [ìˆ˜ì •] URL: /admin/deleteInfoBbsCheckPost -> /admin/deleteInfoBbsCheck
		 @PostMapping("/deleteInfoBbsCheck")
		 public String deleteInfoBbsCheck(@RequestParam(value="bbsNoList", required=false) List<Integer> bbsNoList, RedirectAttributes ra) {
		Â  Â  Â 
		Â  Â  Â if (bbsNoList == null || bbsNoList.isEmpty()) {
		Â  Â  Â  Â  Â ra.addFlashAttribute("message", "ì„ íƒëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.");
		Â  Â  Â  Â  Â return "redirect:/admin/infoBbsManage";
		Â  Â  Â }
		
		Â  Â  Â // InfoServiceì˜ ì¼ê´„ ì‚­ì œ ë©”ì†Œë“œ í˜¸ì¶œ
		Â  Â  Â int result = infoService.deleteInfoBbsCheck(bbsNoList);Â 
		Â  Â  Â 
		Â  Â  Â if (result == bbsNoList.size()) {
		Â  Â  Â  Â  Â ra.addFlashAttribute("message", "ì´ " + result + "ê±´ì˜ ê²Œì‹œê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ì¼ê´„ ì‚­ì œ(ë¹„í™œì„±í™”) ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
		Â  Â  Â } else {
		Â  Â  Â  Â  Â ra.addFlashAttribute("message", "ì¼ê´„ ì‚­ì œ ì²˜ë¦¬ê°€ ì™„ë£Œë˜ì—ˆìœ¼ë‚˜, ìš”ì²­ëœ ê°œìˆ˜(" + bbsNoList.size() + "ê±´) ì¤‘ " + result + "ê±´ë§Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
		Â  Â  Â }
		Â  Â  Â 
		Â  Â  Â return "redirect:/admin/infoBbsManage";
		 }
Â  Â Â 
		 /**
	Â  Â  Â * 3. ITë‰´ìŠ¤ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ
	Â  Â  Â * [ìˆ˜ì •ë¨] ItServiceë¥¼ ì‚¬ìš©í•˜ì—¬ ëª©ë¡ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
	Â  Â  Â */
	Â  Â  @GetMapping("/itBbsManage")
	Â  Â  public String itList(
	Â  Â  Â  Â  @RequestParam(value = "currentPage", defaultValue = "1") int currentPage,
	Â  Â  Â  Â  Model model) {
	Â  Â  Â  Â Â 
	Â  Â  Â  Â  // [ìˆ˜ì •ë¨] ItServiceë¥¼ í†µí•´ ì „ì²´ ê¸€ ìˆ˜ ì¡°íšŒ
	Â  Â  Â  Â  int listCount = itService.selectListCount();Â 
	Â  Â  Â  Â Â 
	Â  Â  Â  Â  // 2. Pagination ê°ì²´ ìƒì„± (AdminServiceì˜ ê³µí†µ ìœ í‹¸ë¦¬í‹° ì‚¬ìš©)
	Â  Â  Â  Â  Pagination pageInfo = adminService.getPagination(currentPage, listCount);
	Â  Â  Â  Â Â 
	Â  Â  Â  Â  // [ìˆ˜ì •ë¨] ItServiceë¥¼ í†µí•´ í˜„ì¬ í˜ì´ì§€ ëª©ë¡ ì¡°íšŒ
	Â  Â  Â  Â  List<ItBbs> bbsList = itService.selectList(currentPage);
	Â  Â  Â  Â Â 
	Â  Â  Â  Â  model.addAttribute("bbsList", bbsList);
	Â  Â  Â  Â  model.addAttribute("pageInfo", pageInfo);
	Â  Â  Â  Â  model.addAttribute("boardName", "ITë‰´ìŠ¤");
	Â  Â  Â  Â  model.addAttribute("boardCode", "it");
	Â  Â  Â  Â Â 
	Â  Â  Â  Â  return "admin/itBbsManage";
	Â  Â  }
		
		Â // ----------------------------------------------------
		// 8. ITë‰´ìŠ¤ ê²Œì‹œê¸€ ë‹¨ì¼ ì‚­ì œ (GET ìš”ì²­ ì²˜ë¦¬)
		// ----------------------------------------------------
		 @GetMapping("/deleteItBbs")
		 public String deleteItBbs(@RequestParam("bbsNo") int bbsNo, RedirectAttributes ra) {
		Â  Â  Â // ItServiceì˜ ë‹¨ì¼ ì‚­ì œ ë©”ì†Œë“œ í˜¸ì¶œ (itNoë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚­ì œ)
		Â  Â  Â int result = itService.deleteItBbs(bbsNo);
		Â  Â  Â 
		Â  Â  Â if (result > 0) {
		Â  Â  Â  Â  Â ra.addFlashAttribute("message", bbsNo + "ë²ˆ ITë‰´ìŠ¤ ê²Œì‹œê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œ(ë¹„í™œì„±í™”) ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
		Â  Â  Â } else {
		Â  Â  Â  Â  Â ra.addFlashAttribute("message", "ITë‰´ìŠ¤ ê²Œì‹œê¸€ ì‚­ì œ ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
		Â  Â  Â }
		Â  Â  Â 
		Â  Â  Â return "redirect:/admin/itBbsManage";Â 
		 }
		
		// ----------------------------------------------------
		// 9. ITë‰´ìŠ¤ ê²Œì‹œê¸€ ì¼ê´„ ì‚­ì œ (POST ìš”ì²­ ì²˜ë¦¬)
		// ----------------------------------------------------
		 @PostMapping("/deleteItBbsCheck")
		 public String deleteItBbsCheck(@RequestParam(value="bbsNoList", required=false) List<Integer> bbsNoList, RedirectAttributes ra) {
		Â  Â  Â 
		Â  Â  Â if (bbsNoList == null || bbsNoList.isEmpty()) {
		Â  Â  Â  Â  Â ra.addFlashAttribute("message", "ì„ íƒëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.");
		Â  Â  Â  Â  Â return "redirect:/admin/itBbsManage";
		Â  Â  Â }
		
		Â  Â  Â // ItServiceì˜ ì¼ê´„ ì‚­ì œ ë©”ì†Œë“œ í˜¸ì¶œ
		Â  Â  Â int result = itService.deleteItBbsCheck(bbsNoList);
		Â  Â  Â 
		Â  Â  Â if (result == bbsNoList.size()) {
		Â  Â  Â  Â  Â ra.addFlashAttribute("message", "ì´ " + result + "ê±´ì˜ ITë‰´ìŠ¤ ê²Œì‹œê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ì¼ê´„ ì‚­ì œ(ë¹„í™œì„±í™”) ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
		Â  Â  Â } else {
		Â  Â  Â  Â  Â ra.addFlashAttribute("message", "ì¼ê´„ ì‚­ì œ ì²˜ë¦¬ê°€ ì™„ë£Œë˜ì—ˆìœ¼ë‚˜, ìš”ì²­ëœ ê°œìˆ˜(" + bbsNoList.size() + "ê±´) ì¤‘ " + result + "ê±´ë§Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
		Â  Â  Â }
		Â  Â  Â 
		Â  Â  Â return "redirect:/admin/itBbsManage";
		 }
Â  Â Â 
Â  Â  /**	
Â  Â  Â * 4. ì§€ì‹ê³µìœ ê²Œì‹œíŒ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ (/admin/post/knowledgeList)
Â  Â  Â * [ìˆ˜ì •ë¨] KnowledgeServiceë¥¼ ì‚¬ìš©í•˜ì—¬ ëª©ë¡ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
Â  Â  Â */
Â  Â  @GetMapping("/post/knowledgeList")
Â  Â  public String knowledgeList(
Â  Â  Â  Â  @RequestParam(value = "currentPage", defaultValue = "1") int currentPage,
Â  Â  Â  Â  Model model) {
Â  Â  Â  Â Â 
Â  Â  Â  Â  // [ìˆ˜ì •ë¨] KnowledgeServiceë¥¼ í†µí•´ ì „ì²´ ê¸€ ìˆ˜ ì¡°íšŒ
Â  Â  Â  Â  int listCount = knowledgeService.selectListCount();Â 
Â  Â  Â  Â Â 
Â  Â  Â  Â  // 2. Pagination ê°ì²´ ìƒì„± (AdminServiceì˜ ê³µí†µ ìœ í‹¸ë¦¬í‹° ì‚¬ìš©)
Â  Â  Â  Â  Pagination pageInfo = adminService.getPagination(currentPage, listCount);
Â  Â  Â  Â Â 
Â  Â  Â  Â  // [ìˆ˜ì •ë¨] KnowledgeServiceë¥¼ í†µí•´ í˜„ì¬ í˜ì´ì§€ ëª©ë¡ ì¡°íšŒ
Â  Â  Â  Â  List<KnowledgeBbs> bbsList = knowledgeService.selectList(currentPage);
Â  Â  Â  Â Â 
Â  Â  Â  Â  model.addAttribute("bbsList", bbsList);
Â  Â  Â  Â  model.addAttribute("pageInfo", pageInfo);
Â  Â  Â  Â  model.addAttribute("boardName", "ì§€ì‹ê³µìœ ê²Œì‹œíŒ");
Â  Â  Â  Â  model.addAttribute("boardCode", "knowledge");
Â  Â  Â  Â Â 
Â  Â  Â  Â  return "admin/postListManage";
Â  Â  }
Â  Â Â 
Â  Â  /**
Â  Â  Â * 4. ìŠ¤í„°ë””ëª¨ì§‘ê²Œì‹œíŒ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ (/admin/post/studyList)
Â  Â  Â * [ìˆ˜ì •ë¨] StudyServiceë¥¼ ì‚¬ìš©í•˜ì—¬ ëª©ë¡ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
Â  Â  Â */
Â  Â  @GetMapping("/post/studyList")
Â  Â  public String studyList(
Â  Â  Â  Â  @RequestParam(value = "currentPage", defaultValue = "1") int currentPage,
Â  Â  Â  Â  Model model) {
Â  Â  Â  Â Â 
Â  Â  Â  Â  // [ìˆ˜ì •ë¨] StudyServiceë¥¼ í†µí•´ ì „ì²´ ê¸€ ìˆ˜ ì¡°íšŒ
Â  Â  Â  Â  int listCount = studyService.selectListCount();Â 
Â  Â  Â  Â Â 
Â  Â  Â  Â  // 2. Pagination ê°ì²´ ìƒì„± (AdminServiceì˜ ê³µí†µ ìœ í‹¸ë¦¬í‹° ì‚¬ìš©)
Â  Â  Â  Â  Pagination pageInfo = adminService.getPagination(currentPage, listCount);
Â  Â  Â  Â Â 
Â  Â  Â  Â  // [ìˆ˜ì •ë¨] StudyServiceë¥¼ í†µí•´ í˜„ì¬ í˜ì´ì§€ ëª©ë¡ ì¡°íšŒ
Â  Â  Â  Â  List<StudyBbs> bbsList = studyService.selectList(currentPage);
Â  Â  Â  Â Â 
Â  Â  Â  Â  model.addAttribute("bbsList", bbsList);
Â  Â  Â  Â  model.addAttribute("pageInfo", pageInfo);
Â  Â  Â  Â  model.addAttribute("boardName", "ìŠ¤í„°ë””ëª¨ì§‘ê²Œì‹œíŒ");
Â  Â  Â  Â  model.addAttribute("boardCode", "study");
Â  Â  Â  Â Â 
Â  Â  Â  Â  return "admin/postListManage";
Â  Â  }

Â  Â  /**
Â  Â  Â * 5. ê³µì§€ì‚¬í•­ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ (/admin/post/noticeList)
Â  Â  Â * [ìˆ˜ì •ë¨] NoticeServiceë¥¼ ì‚¬ìš©í•˜ì—¬ ëª©ë¡ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
Â  Â  Â */
Â  Â  @GetMapping("/post/noticeList")
Â  Â  public String noticeList(
Â  Â  Â  Â  @RequestParam(value = "currentPage", defaultValue = "1") int currentPage,
Â  Â  Â  Â  Model model) {
Â  Â  Â  Â Â 
Â  Â  Â  Â  // [ìˆ˜ì •ë¨] NoticeServiceë¥¼ í†µí•´ ì „ì²´ ê¸€ ìˆ˜ ì¡°íšŒ
Â  Â  Â  Â  int listCount = noticeService.selectListCount();Â 
Â  Â  Â  Â Â 
Â  Â  Â  Â  // 2. Pagination ê°ì²´ ìƒì„± (AdminServiceì˜ ê³µí†µ ìœ í‹¸ë¦¬í‹° ì‚¬ìš©)
Â  Â  Â  Â  Pagination pageInfo = adminService.getPagination(currentPage, listCount);
Â  Â  Â  Â Â 
Â  Â  Â  Â  // [ìˆ˜ì •ë¨] NoticeServiceë¥¼ í†µí•´ í˜„ì¬ í˜ì´ì§€ ëª©ë¡ ì¡°íšŒ
Â  Â  Â  Â  List<NoticeBbs> bbsList = noticeService.selectList(currentPage);
Â  Â  Â  Â Â 
Â  Â  Â  Â  model.addAttribute("bbsList", bbsList);
Â  Â  Â  Â  model.addAttribute("pageInfo", pageInfo);
Â  Â  Â  Â  model.addAttribute("boardName", "ê³µì§€ì‚¬í•­");
Â  Â  Â  Â  model.addAttribute("boardCode", "notice");
Â  Â  Â  Â Â 
Â  Â  Â  Â  return "admin/postListManage";
Â  Â  }

Â  Â 

}
